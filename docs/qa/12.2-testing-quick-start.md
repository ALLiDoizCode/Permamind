# Story 12.2 Manual Testing Quick Start Guide

## Prerequisites

Before starting manual testing, ensure you have:

1. âœ… **Wallet Extension Installed**
   - ArConnect: https://www.arconnect.io
   - OR Wander: https://www.wander.app
   - Install in Chrome, Firefox, Edge, or Safari

2. âœ… **Test AR Balance**
   - Get test AR from faucet: https://faucet.arweave.net
   - Minimum: 0.001 AR for testing
   - Check balance in wallet extension

3. âœ… **CLI Built**
   ```bash
   cd /Users/jonathangreen/Documents/Permamind
   npm run build
   ```

4. âœ… **Test Skill Available**
   ```bash
   ls skills/ao-basics/SKILL.md  # Should exist
   ```

## Quick Test Command

**Basic Smoke Test:**
```bash
# From project root
skills publish skills/ao-basics
```

**What should happen:**
1. CLI starts wallet connection process
2. Browser opens automatically to `http://localhost:[random-port]`
3. **Custom UI loads** with Permamind branding (title: "Permamind Wallet Connection")
4. Wallet extension prompts for permissions
5. You approve permissions
6. Status changes to "Connected"
7. Wallet address displayed
8. Transaction signing request appears
9. You approve transaction in wallet
10. Success! Browser tab closes or shows completion message

## Visual Verification Checklist

When the browser opens, quickly verify:

- [ ] **Title:** "Permamind Wallet Connection" (NOT "Arweave Wallet Signer")
- [ ] **Dark Theme:** Background is dark (#10151B), not gradient or light
- [ ] **No Theme Toggle:** No sun/moon icon to switch themes
- [ ] **Status Indicator:** Shows colored status (yellow connecting, green connected, etc.)
- [ ] **Wallet Address:** Displayed in monospace font when connected
- [ ] **Request Queue:** Shows operations with emoji icons
- [ ] **Activity Log:** Bottom section with timestamped entries

## Cross-Browser Testing

Test in each browser:

```bash
# Chrome
skills publish skills/ao-basics

# Firefox
skills publish skills/ao-basics

# Safari (macOS)
skills publish skills/ao-basics

# Edge
skills publish skills/ao-basics
```

**For each browser, verify:**
- Custom UI loads correctly
- Wallet connection works
- Transaction signing completes
- No JavaScript console errors (F12 â†’ Console tab)

## Responsive Design Testing

**Desktop (1440px):**
```bash
1. Run: skills publish skills/ao-basics
2. Browser opens
3. Resize browser window to ~1440px width
4. Verify: Full layout, all sections visible, good spacing
```

**Tablet (768px):**
```bash
1. Run: skills publish skills/ao-basics
2. Resize browser to 768px width (or use DevTools Device Mode)
3. Verify: Layout adjusts, text readable, touch targets adequate
```

**Mobile (375px):**
```bash
1. Run: skills publish skills/ao-basics
2. Resize browser to 375px width (or use DevTools Device Mode)
3. Verify: Stacked layout, no horizontal scroll, legible text
```

**Physical Mobile Device:**
```bash
1. Run: skills publish skills/ao-basics
2. CLI will show URL: http://localhost:[port]
3. Get local IP: ifconfig | grep "inet " | grep -v 127.0.0.1
4. On phone, visit: http://[your-ip]:[port]
5. Test full wallet flow on phone
```

## Error Scenario Testing

**Test 1: Reject Connection**
```bash
1. Run: skills publish skills/ao-basics
2. When wallet prompt appears, click "Reject"
3. Verify: Error message shown, helpful guidance provided
```

**Test 2: Reject Signature**
```bash
1. Run: skills publish skills/ao-basics
2. Connect wallet (approve)
3. When signature prompt appears, click "Reject"
4. Verify: Error message, queue shows error status
```

**Test 3: Kill Server Mid-Operation**
```bash
1. Run: skills publish skills/ao-basics
2. Connect wallet
3. During signing, press Ctrl+C in terminal
4. Verify: Browser shows connection error message
```

**Test 4: No Wallet Extension**
```bash
1. Disable/uninstall wallet extension
2. Run: skills publish skills/ao-basics
3. Verify: Error message about missing wallet extension
```

## Common Issues & Solutions

### Issue: Default UI loads instead of custom UI

**Symptoms:** Browser shows "Arweave Wallet Signer" with gradient background and theme toggle

**Causes:**
- Custom template not found at runtime
- Build didn't copy UI assets
- Path resolution incorrect

**Solutions:**
```bash
# Verify UI assets exist
ls cli/dist/ui/wallet-connect.html

# Rebuild if missing
npm run build

# Check for build errors
npm run build 2>&1 | grep -i error
```

### Issue: Browser doesn't open

**Symptoms:** CLI shows "Waiting for wallet connection..." but no browser opens

**Solutions:**
```bash
# Manually open the URL shown in CLI output
# Example: http://localhost:54321

# Or check if browser binary path is correct
# Check system default browser settings
```

### Issue: EventSource connection fails

**Symptoms:** Browser shows connection error, DevTools Network tab shows failed /events request

**Solutions:**
- Ensure CLI process still running
- Check firewall not blocking localhost connections
- Verify port not in use by another process: `lsof -i :[port]`

### Issue: Wallet extension doesn't detect

**Symptoms:** Status shows "No Arweave wallet extension detected"

**Solutions:**
- Ensure wallet extension installed and enabled
- Try refreshing browser page
- Check wallet extension is unlocked
- Verify extension compatible with browser version

## DevTools Debugging

**Check EventSource Connection:**
```javascript
// In browser console (F12)
1. Go to Network tab
2. Filter: "events"
3. Should see EventSource connection active
4. Type: "eventsource"
```

**Check JavaScript Errors:**
```javascript
// In browser console (F12)
1. Go to Console tab
2. Clear console
3. Complete wallet flow
4. Check for any red error messages
5. Report any errors found
```

**Check Element IDs:**
```javascript
// In browser console (F12)
console.log('Status:', document.getElementById('status'));
console.log('Wallet Info:', document.getElementById('walletInfo'));
console.log('Address:', document.getElementById('address'));
console.log('Queue:', document.getElementById('queueContainer'));
console.log('Log:', document.getElementById('log'));
// All should log actual DOM elements, not null
```

## Regression Testing

**Verify existing workflows still work:**

```bash
# SEED_PHRASE wallet (should NOT open browser)
export SEED_PHRASE="your twelve word seed phrase here"
skills publish skills/ao-basics
# Expected: Publishes without browser, uses seed phrase wallet

# Search still works
skills search ao
# Expected: Shows search results

# Install still works
skills install ao-basics
# Expected: Installs skill successfully
```

## Reporting Test Results

After completing tests, update:

**File:** `/Users/jonathangreen/Documents/Permamind/docs/qa/gates/12.2-manual-testing-checklist.yml`

**For each test:**
```yaml
status: pending  # Change to: passed, failed, blocked
```

**If test fails, add notes:**
```yaml
status: failed
notes: "Error message: XYZ. Steps to reproduce: ..."
```

## Screenshot Documentation

**Recommended screenshots:**
1. Desktop view (1440px) - full page
2. Tablet view (768px) - full page
3. Mobile view (375px) - full page
4. Connected state - showing wallet address
5. Signing state - showing queue with request
6. Completed state - showing success message
7. Each browser tested (Chrome, Firefox, Safari, Edge)

**Save to:** `/Users/jonathangreen/Documents/Permamind/docs/qa/screenshots/12.2/`

## Success Criteria

âœ… **Story ready for "Ready for Review" status when:**

- All visual design tests pass (Permamind branding visible)
- All SSE protocol tests pass (connection, signing work)
- All cross-browser tests pass (Chrome, Firefox, Safari, Edge)
- All responsive design tests pass (375px, 768px, 1440px)
- All error handling tests pass (graceful error messages)
- All regression tests pass (Epic 11 workflows work)
- No JavaScript console errors
- No blocking issues found

## Questions or Issues?

- Check story file: `docs/stories/12.2.story.md`
- Check UI documentation: `cli/src/ui/README.md`
- Check adapter code: `cli/src/lib/node-arweave-wallet-adapter.ts`
- Check fork package: `@permamind/node-arweave-wallet@^0.0.13`

---

**Good luck with testing!** ðŸ§ªâœ¨
